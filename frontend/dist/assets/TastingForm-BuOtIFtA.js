import{r as o,j as t}from"./index-DMm8wxqv.js";const Z="http://localhost:3001/api";function ee({onSubmit:w,initialValues:a={}}){var S,F,N,R,L,O;const[c,P]=o.useState(a.cafeId||""),[I,k]=o.useState(a.cafeNeighborhood||""),[x,q]=o.useState(a.coffeeRoaster||""),[p,E]=o.useState(a.coffeeOrigin||""),[b,T]=o.useState(a.coffeeOriginRegion||""),[l,A]=o.useState(a.brewMethod||""),[d,_]=o.useState(a.tastingNotes||[]),[h,B]=o.useState(a.acidity||""),[j,D]=o.useState(a.mouthFeel||""),[i,U]=o.useState(a.roastLevel||""),[f,W]=o.useState(a.rating||3),[v,$]=o.useState(a.notes||""),[C,z]=o.useState(a.isPublic!==void 0?a.isPublic:!0),[u,g]=o.useState(""),[m,G]=o.useState(a.coffeeName||""),[y,H]=o.useState([]),[n,J]=o.useState({});o.useEffect(()=>{(async()=>{try{const r=await(await fetch(`${Z}/metadata/form-options`)).json();H(r.cafes||[]),J(r.enums||{})}catch(s){console.error("Error fetching metadata:",s),g("Failed to load metadata")}})()},[]);const K=e=>{const{value:s,checked:r}=e.target;_(M=>r?[...M,s]:M.filter(Y=>Y!==s)),u&&g("")},Q=e=>{const s=y.find(r=>r._id===e.target.value);P(e.target.value),k(s?s.neighborhood:"")},X=e=>{if(e.preventDefault(),d.length===0){g("Please select at least one tasting note.");return}w({coffeeName:m,cafeId:c,cafeNeighborhood:I,coffeeRoaster:x,coffeeOrigin:p,coffeeOriginRegion:b,brewMethod:l,tastingNotes:d,acidity:h,mouthFeel:j,roastLevel:i,rating:f,notes:v,isPublic:C})};return t.jsxs("form",{onSubmit:X,children:[u&&t.jsx("p",{style:{color:"red",marginBottom:"1rem"},children:u}),t.jsxs("label",{htmlFor:"coffeeName",children:["Coffee Name:",t.jsx("input",{type:"text",id:"coffeeName",name:"coffeeName",value:m,onChange:e=>G(e.target.value),required:!0})]}),t.jsxs("label",{htmlFor:"cafeId",children:["Where did you taste this coffee?:",t.jsxs("select",{id:"cafeId",name:"cafeId",value:c,onChange:Q,required:!0,children:[t.jsx("option",{value:"",children:"Select Cafe"}),y.map(e=>t.jsx("option",{value:e._id,children:e.name},e._id))]})]}),t.jsxs("label",{htmlFor:"coffeeRoaster",children:["Coffee Roaster:",t.jsx("input",{type:"text",id:"coffeeRoaster",name:"coffeeRoaster",value:x,onChange:e=>q(e.target.value)})]}),t.jsxs("label",{htmlFor:"coffeeOrigin",children:["Coffee Origin:",t.jsx("input",{type:"text",id:"coffeeOrigin",name:"coffeeOrigin",value:p,onChange:e=>E(e.target.value)})]}),t.jsxs("label",{htmlFor:"coffeeOriginRegion",children:["Coffee Region:",t.jsx("input",{type:"text",id:"coffeeOriginRegion",name:"coffeeOriginRegion",value:b,onChange:e=>T(e.target.value)})]}),t.jsxs("label",{htmlFor:"brewMethod",children:["Brew Method:",t.jsxs("select",{id:"brewMethod",name:"brewMethod",value:l,onChange:e=>A(e.target.value),required:!0,children:[t.jsx("option",{value:"",children:"Select"}),(S=n.brewMethod)==null?void 0:S.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("label",{htmlFor:"roastLevel",children:["Roast Level:",t.jsx("input",{type:"range",id:"roastLevel",name:"roastLevel",min:"0",max:(F=n.roastLevel)!=null&&F.length?n.roastLevel.length-1:2,value:Math.max(((N=n.roastLevel)==null?void 0:N.indexOf(i))??0,0),onChange:e=>{var s;return U(((s=n.roastLevel)==null?void 0:s[e.target.value])||"")},required:!0}),t.jsx("span",{style:{marginLeft:"1rem"},children:i||"Select"})]}),t.jsxs("fieldset",{children:[t.jsx("legend",{children:"Tasting Notes (choose multiple):"}),(n.tastingNotes||[]).map(e=>t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",name:"tastingNotes",value:e,checked:d.includes(e),onChange:K}),e]},e))]}),t.jsxs("label",{htmlFor:"acidity",children:["Acidity:",t.jsx("input",{type:"range",id:"acidity",name:"acidity",min:"0",max:(R=n.acidity)!=null&&R.length?n.acidity.length-1:2,value:((L=n.acidity)==null?void 0:L.indexOf(h))??1,onChange:e=>{var s;return B(((s=n.acidity)==null?void 0:s[e.target.value])||"")},required:!0}),t.jsx("span",{style:{marginLeft:"1rem"},children:h||"Select"})]}),t.jsxs("label",{htmlFor:"mouthFeel",children:["Mouth Feel:",t.jsxs("select",{id:"mouthFeel",name:"mouthFeel",value:j,onChange:e=>D(e.target.value),required:!0,children:[t.jsx("option",{value:"",children:"Select"}),(O=n.mouthFeel)==null?void 0:O.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("label",{htmlFor:"rating",children:["Rating (1-5):",t.jsx("input",{type:"range",id:"rating",name:"rating",min:"1",max:"5",value:f,onChange:e=>W(Number(e.target.value)),required:!0}),t.jsx("span",{style:{marginLeft:"1rem"},children:f})]}),t.jsxs("label",{labelhtmlFor:"notes",children:["Notes:",t.jsx("textarea",{id:"notes",name:"notes",value:v,onChange:e=>$(e.target.value),maxLength:500,placeholder:"Additional notes about the tasting"})]}),t.jsxs("label",{htmlFor:"isPublic",children:["Public:",t.jsx("input",{type:"checkbox",id:"isPublic",name:"isPublic",checked:C,onChange:e=>z(e.target.checked)})]}),t.jsx("button",{style:{marginTop:"1rem",backgroundColor:"#170351",color:"#fff",padding:"0.5rem 1rem",border:"none",cursor:"pointer"},type:"submit",disabled:!c||!m||!l||!i,children:"Submit"})]})}export{ee as T};
