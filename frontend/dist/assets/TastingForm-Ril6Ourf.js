import{r as j,j as r,c as G,x as S,a as P,b as I,g as O,s as T,f as $,d as q,v as D}from"./index-DgWt6i1n.js";import{s as U,u as _}from"./useThemeProps-BFE14bTG.js";import{u as x}from"./useCafeStore-CDYPX136.js";import{a as z}from"./sweetalert2.esm.all-CIbvFVkF.js";import{u as A,f as B,S as H,T as h,F as w,a as M,b as y}from"./SwalAlertStyles-BvpRlSlr.js";import{M as b,F as k,C as L}from"./MenuItem-wF5y1Mzr.js";const J=I(),K=U("div",{name:"MuiContainer",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:t}=s;return[o.root,o[`maxWidth${S(String(t.maxWidth))}`],t.fixed&&o.fixed,t.disableGutters&&o.disableGutters]}}),Q=s=>_({props:s,name:"MuiContainer",defaultTheme:J}),X=(s,o)=>{const t=u=>O(o,u),{classes:c,fixed:m,disableGutters:g,maxWidth:a}=s,n={root:["root",a&&`maxWidth${S(String(a))}`,m&&"fixed",g&&"disableGutters"]};return P(n,t,c)};function Y(s={}){const{createStyledComponent:o=K,useThemeProps:t=Q,componentName:c="MuiContainer"}=s,m=o(({theme:a,ownerState:n})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!n.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}}),({theme:a,ownerState:n})=>n.fixed&&Object.keys(a.breakpoints.values).reduce((u,d)=>{const l=d,p=a.breakpoints.values[l];return p!==0&&(u[a.breakpoints.up(l)]={maxWidth:`${p}${a.breakpoints.unit}`}),u},{}),({theme:a,ownerState:n})=>({...n.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},...n.maxWidth&&n.maxWidth!=="xs"&&{[a.breakpoints.up(n.maxWidth)]:{maxWidth:`${a.breakpoints.values[n.maxWidth]}${a.breakpoints.unit}`}}}));return j.forwardRef(function(n,u){const d=t(n),{className:l,component:p="div",disableGutters:F=!1,fixed:N=!1,maxWidth:v="lg",classes:W,...e}=d,i={...d,component:p,disableGutters:F,fixed:N,maxWidth:v},f=X(i,c);return r.jsx(m,{as:p,ownerState:i,className:G(f.root,l),ref:u,...e})})}const le=Y({createStyledComponent:T("div",{name:"MuiContainer",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:t}=s;return[o.root,o[`maxWidth${S(String(t.maxWidth))}`],t.fixed&&o.fixed,t.disableGutters&&o.disableGutters]}}),useThemeProps:s=>$({props:s,name:"MuiContainer"})});function Z(s){return O("MuiFormGroup",s)}q("MuiFormGroup",["root","row","error"]);const V=s=>{const{classes:o,row:t,error:c}=s;return P({root:["root",t&&"row",c&&"error"]},Z,o)},ee=T("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:t}=s;return[o.root,t.row&&o.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),te=j.forwardRef(function(o,t){const c=$({props:o,name:"MuiFormGroup"}),{className:m,row:g=!1,...a}=c,n=A(),u=B({props:c,muiFormControl:n,states:["error"]}),d={...c,row:g,error:u.error},l=V(d);return r.jsx(ee,{className:G(l.root,m),ownerState:d,ref:t,...a})}),ce=({onSubmit:s,initialValues:o={}})=>{var v,W;const[t,c]=j.useState({cafeId:o.cafeId||"",cafeName:o.cafeName||"",cafeNeighborhood:o.cafeNeighborhood||"",coffeeRoaster:o.coffeeRoaster||"",coffeeOrigin:o.coffeeOrigin||"",coffeeOriginRegion:o.coffeeOriginRegion||"",brewMethod:o.brewMethod||"",tastingNotes:o.tastingNotes||[],acidity:o.acidity||"",mouthFeel:o.mouthFeel||"",roastLevel:o.roastLevel||"",rating:o.rating||3,notes:o.notes||"",isPublic:o.isPublic!==void 0?o.isPublic:!0,coffeeName:o.coffeeName||""}),m=x(e=>e.cafes),g=x(e=>e.setCafes),a=x(e=>e.options),n=x(e=>e.setOptions),u=x(e=>e.fetchError),d=x(e=>e.setFetchError);x(e=>e.user),j.useEffect(()=>{const e=async()=>{try{const i=await z("/metadata/form-options");g(i.cafes||[]),n(i.enums||{})}catch(i){console.error("Error fetching metadata:",i),d("Failed to load metadata")}};(!m||m.length===0)&&e()},[g,n,d,m]);const l=e=>{const{name:i,value:f,type:C,checked:R}=e.target;c(E=>({...E,[i]:C==="checkbox"?R:f})),u&&d("")},p=e=>{const{value:i,checked:f}=e.target;c(C=>({...C,tastingNotes:f?[...C.tastingNotes,i]:C.tastingNotes.filter(R=>R!==i)})),u&&d("")},F=e=>{const i=m.find(f=>f._id===e.target.value);c(f=>({...f,cafeId:e.target.value,cafeNeighborhood:i?i.neighborhood:""}))},N=e=>{if(e.preventDefault(),t.tastingNotes.length===0){d("Please select at least one tasting note.");return}s(t)};return r.jsxs("form",{onSubmit:N,children:[u&&r.jsx(H,{message:u,type:"error"}),r.jsx(h,{label:"Coffee Name",name:"coffeeName",value:t.coffeeName,onChange:l,required:!0,fullWidth:!0,margin:"normal"}),r.jsxs(h,{select:!0,label:"Where did you taste this coffee?",name:"cafeId",value:t.cafeId,onChange:F,required:!0,fullWidth:!0,margin:"normal",children:[r.jsx(b,{value:"",children:"Select a cafe"}),m.map(e=>r.jsx(b,{value:e._id,children:e.name},e._id))]}),r.jsx(h,{label:"Coffee Roaster",name:"coffeeRoaster",value:t.coffeeRoaster,onChange:l,fullWidth:!0,margin:"normal"}),r.jsx(h,{label:"Coffee Origin",name:"coffeeOrigin",value:t.coffeeOrigin,onChange:l,fullWidth:!0,margin:"normal"}),r.jsx(h,{label:"Coffee Region",name:"coffeeOriginRegion",value:t.coffeeOriginRegion,onChange:l,fullWidth:!0,margin:"normal"}),r.jsxs(h,{select:!0,label:"Brew Method",name:"brewMethod",value:t.brewMethod,onChange:l,required:!0,fullWidth:!0,margin:"normal",children:[r.jsx(b,{value:"",children:"Select"}),(a.brewMethod||[]).map(e=>r.jsx(b,{value:e,children:e},e))]}),r.jsxs(w,{fullWidth:!0,margin:"normal",children:[r.jsx(M,{children:"Roast Level"}),r.jsx(h,{type:"range",name:"roastLevel",min:0,max:(v=a.roastLevel)!=null&&v.length?a.roastLevel.length-1:2,value:Math.max(((W=a.roastLevel)==null?void 0:W.indexOf(t.roastLevel))??0,0),onChange:e=>c(i=>{var f;return{...i,roastLevel:((f=a.roastLevel)==null?void 0:f[e.target.value])||""}}),required:!0}),r.jsx(y,{children:t.roastLevel||"Select"})]}),r.jsxs(w,{component:"fieldset",margin:"normal",children:[r.jsx(M,{component:"legend",children:"Tasting Notes (choose multiple):"}),r.jsx(te,{row:!0,children:(a.tastingNotes||[]).map(e=>r.jsx(k,{control:r.jsx(L,{name:"tastingNotes",value:e,checked:t.tastingNotes.includes(e),onChange:p}),label:e},e))})]}),r.jsxs(h,{select:!0,label:"Mouth Feel",name:"mouthFeel",value:t.mouthFeel,onChange:l,required:!0,fullWidth:!0,margin:"normal",children:[r.jsx(b,{value:"",children:"Select"}),(a.mouthFeel||[]).map(e=>r.jsx(b,{value:e,children:e},e))]}),r.jsxs(w,{fullWidth:!0,margin:"normal",children:[r.jsx(M,{children:"Rating (1-5)"}),r.jsx(h,{type:"range",name:"rating",min:1,max:5,value:t.rating,onChange:l,required:!0}),r.jsx(y,{children:t.rating})]}),r.jsx(h,{label:"Notes",name:"notes",value:t.notes,onChange:l,multiline:!0,rows:3,fullWidth:!0,margin:"normal",inputProps:{maxLength:500},placeholder:"Additional notes about the tasting"}),r.jsx(k,{control:r.jsx(L,{id:"isPublic",name:"isPublic",checked:t.isPublic,onChange:l}),label:"Public"}),r.jsx(D,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2},disabled:!t.cafeId||!t.coffeeName||!t.brewMethod||!t.roastLevel,children:"Submit"})]})};export{le as C,ce as T};
