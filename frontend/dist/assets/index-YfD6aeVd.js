const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-JguMnKVy.js","assets/react-fsc5c2Qp.js","assets/maplibre-Dtgyks6D.js","assets/maplibre-B4QYLKPJ.css","assets/MapPage-CWfx1ZXb.js","assets/mui-B26OF-U5.js","assets/zustand-dRn5wo8y.js","assets/TastingsPage-7COQdGuy.js","assets/TastingForm-Gd7VgyRS.js","assets/CafePage-C2js8DJa.js","assets/UserPage-BEceHaKf.js","assets/AdminPage-DyhHBhnI.js"])))=>i.map(i=>d[i]);
import{j as e,r as y,F as Pe,h as Te,g as B,L as N,u as qe,i as He,B as Ge,k as Ve,l as Y,m as Ke}from"./react-fsc5c2Qp.js";import{S as Je,m as K}from"./vendor-JguMnKVy.js";import{c as Xe}from"./zustand-dRn5wo8y.js";import{A as me,B as C,T as U,I,a as M,b as J,C as Le,L as v,c as A,d as E,e as _,M as Ye,f as q,g as ce,S as re,F as Ze,h as et,i as tt,D as H,P as st,j as rt,k as ot,l as at,m as nt,s as ge,n as Fe,o as de,u as Ae,p as it,q as Ee,r as _e,t as Me,v as De,w as Oe,x as lt,y as ct,z as dt,E as oe,G as We,R as ue,H as ze,J as Re,K as Ne,N as he,O as xe,Q as Z,U as ee,V as Be,W as Ue,X as ut,Y as ht,Z as xt,_ as we}from"./mui-B26OF-U5.js";import"./maplibre-Dtgyks6D.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(a){if(a.ep)return;a.ep=!0;const u=r(a);fetch(a.href,u)}})();const mt="http://localhost:3001/api",G=async(t,s={})=>{const r=localStorage.getItem("userToken"),o={headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}},...s};try{const a=await fetch(`${mt}${t}`,o),u=await a.json();if(!a.ok)throw new Error(u.error||"API request failed");return u}catch(a){throw console.error("API Error:",a),a}},gt={getAll:()=>G("/cafes"),getById:t=>G(`/cafes/${t}`)},Se={getPublic:()=>G("/tastings/public"),getUserTastings:()=>G("/tastings"),create:t=>G("/tastings",{method:"POST",body:JSON.stringify(t)}),search:t=>G(`/tastings/public/search?query=${encodeURIComponent(t)}`)},ae={login:t=>G("/auth/login",{method:"POST",body:JSON.stringify(t)}),register:t=>G("/auth/register",{method:"POST",body:JSON.stringify(t)})},ie=(t,s,r)=>{if(!t)return[];let o=t;return s&&s!=="all"&&(o=o.filter(a=>a.category===s)),r&&r!=="all"&&(o=o.filter(a=>{var u,p;return((p=(u=a.locations)==null?void 0:u[0])==null?void 0:p.neighborhood)===r})),o},j=Xe(t=>({themeMode:localStorage.getItem("themeMode")||"light",setThemeMode:s=>{localStorage.setItem("themeMode",s),t({themeMode:s})},cafes:[],setCafes:s=>t(r=>{const o=r.cafeTypeFilter||r.neighborhoodFilter?ie(s,r.cafeTypeFilter,r.neighborhoodFilter):r.filteredCafes;return{cafes:s,filteredCafes:o}}),searchQuery:"",setSearchQuery:s=>t({searchQuery:s}),searchResults:[],setSearchResults:s=>t({searchResults:s}),cafeTypeFilter:"",neighborhoodFilter:"",filteredCafes:[],setCafeTypeFilter:s=>t(r=>{const o=ie(r.cafes,s,r.neighborhoodFilter);return{cafeTypeFilter:s,filteredCafes:o}}),setNeighborhoodFilter:s=>t(r=>{const o=ie(r.cafes,r.cafeTypeFilter,s);return{neighborhoodFilter:s,filteredCafes:o}}),clearFilters:()=>t({cafeTypeFilter:"",neighborhoodFilter:"",filteredCafes:[]}),tastings:[],setTastings:s=>t({tastings:s}),loading:!1,setLoading:s=>t({loading:s}),editingTasting:null,setEditingTasting:s=>t({editingTasting:s}),deletingTasting:null,setDeletingTasting:s=>t({deletingTasting:s}),fetchTastings:async s=>{t({loading:!0});try{let r=[];s?r=(await Se.getUserTastings()).data||[]:r=(await Se.getPublic()).data||[],t({tastings:r})}catch{t({tastings:[]})}t({loading:!1})},options:{},setOptions:s=>t({options:s}),user:null,setUser:s=>t({user:s}),isLoggedIn:!!localStorage.getItem("userToken"),setIsLoggedIn:s=>t({isLoggedIn:s}),userSubmissions:[],setUserSubmissions:s=>t({userSubmissions:s}),fetchError:"",setFetchError:s=>t({fetchError:s}),currentPage:1,setCurrentPage:s=>t({currentPage:s}),tastingsPerPage:10,setTastingsPerPage:s=>t({tastingsPerPage:s})})),pt="/assets/spiltCoffeeError-BB_lQR1E.svg",ft=({message:t,type:s="error"})=>e.jsx(me,{severity:s,sx:{my:2},children:t}),ne=t=>{var s,r,o,a,u,p,d,l,f,b;return Je.fire({confirmButtonColor:((r=(s=t==null?void 0:t.theme)==null?void 0:s.colors)==null?void 0:r.primary)||"#3085d6",background:((a=(o=t==null?void 0:t.theme)==null?void 0:o.colors)==null?void 0:a.background)||"white",color:((p=(u=t==null?void 0:t.theme)==null?void 0:u.colors)==null?void 0:p.textDark)||"black",fontFamily:((l=(d=t==null?void 0:t.theme)==null?void 0:d.fonts)==null?void 0:l.main)||"Avenir, sans-serif",width:((b=(f=t==null?void 0:t.theme)==null?void 0:f.containerWidths)==null?void 0:b.md)||"20rem",heightAuto:!0,imageUrl:(t==null?void 0:t.imageUrl)||pt,imageWidth:(t==null?void 0:t.imageWidth)||200,icon:"error",title:(t==null?void 0:t.title)||"Oops! ",customClass:{popup:"swal-popup-custom",title:"swal-title-custom",confirmButton:"swal-confirm-custom",icon:"swal-hide-icon"},...t})},jt=({onClose:t,setCurrentUser:s,setIsLoggedIn:r})=>{const[o,a]=y.useState(""),[u,p]=y.useState(""),[d,l]=y.useState(!1),[f,b]=y.useState(!1),[P,O]=y.useState(""),D=j(m=>m.fetchError),n=j(m=>m.setFetchError),h=j(m=>m.loading),c=j(m=>m.setLoading),w=async m=>{var x,W;m.preventDefault(),c(!0),n("");try{const T=P.trim(),F=u.trim();let k;if(d?k=await ae.register({username:T,email:o.trim(),password:F}):k=await ae.login({username:T,email:T,password:F}),k.token||k.accessToken){const S=k.token||k.accessToken;localStorage.setItem("userToken",S),localStorage.setItem("userId",k.user.id),localStorage.setItem("username",((x=k.user)==null?void 0:x.username)||T);let R="user";try{const{jwtDecode:z}=await K(async()=>{const{jwtDecode:Q}=await import("./vendor-JguMnKVy.js").then($=>$.o);return{jwtDecode:Q}},__vite__mapDeps([0,1,2,3]));R=z(S).role||"user"}catch{R="user"}localStorage.setItem("userRole",R),localStorage.setItem("admin",R==="admin"?"true":"false"),r(!0),s({username:((W=k.user)==null?void 0:W.username)||T}),t()}else n(k.error||k.message||(d?"Signup failed. Please check your input.":"Invalid credentials."))}catch(T){console.error("Network error:",T),ne({title:d?"Unable to sign up":"Unable to log in",text:"We couldn't reach the server. Please try again.",icon:"error"})}finally{c(!1)}};return e.jsxs(C,{sx:{width:{xs:"90vw",sm:400},p:3,display:"flex",flexDirection:"column",gap:2,backgroundColor:"background.paper",borderRadius:2,boxShadow:3},children:[e.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(U,{variant:"h4",color:"text.primary",children:d?"Sign Up":"Login"}),e.jsx(I,{onClick:t,"aria-label":"Close login form",children:"×"})]}),e.jsxs("form",{onSubmit:w,style:{display:"flex",flexDirection:"column",gap:16},children:[d&&e.jsx(M,{label:"Email",type:"email",value:o,onChange:m=>a(m.target.value),required:!0,fullWidth:!0,autoComplete:"email",color:"primary"}),e.jsx(M,{label:d?"Username":"Username or Email",type:"text",value:P,onChange:m=>O(m.target.value),required:!0,fullWidth:!0,autoComplete:"username",color:"primary"}),e.jsxs(C,{sx:{position:"relative"},children:[e.jsx(M,{label:"Password",type:f?"text":"password",value:u,onChange:m=>p(m.target.value),required:!0,fullWidth:!0,autoComplete:"current-password",color:"primary"}),e.jsx(I,{"aria-label":"Toggle password visibility",onClick:()=>b(m=>!m),sx:{position:"absolute",right:8,top:8},size:"small",children:f?e.jsx(Pe,{}):e.jsx(Te,{})})]}),e.jsx(J,{type:"submit",disabled:h,variant:"contained",sx:{py:1.5,mt:1},color:"primary",children:h?e.jsx(Le,{size:24,color:"inherit"}):d?"Sign Up":"Login"})]}),D&&e.jsx(me,{severity:"error",children:D}),e.jsxs(U,{align:"center",sx:{mt:2},color:"text.secondary",children:[d?"Already have an account?":"Don't have an account?"," ",e.jsx(J,{onClick:()=>l(!d),variant:"text",size:"small",children:d?"Login":"Sign Up"})]})]})},ke=({label:t,options:s,value:r,onChange:o,iconComponent:a})=>{const[u,p]=B.useState(null),d=!!u,l=Array.isArray(s)?s:[];return e.jsxs(e.Fragment,{children:[e.jsx(v,{disablePadding:!0,sx:{display:"block",py:0},children:e.jsxs(A,{onClick:f=>p(f.currentTarget),sx:{width:"100%",justifyContent:"flex-start",minHeight:48},children:[e.jsx(E,{children:a}),e.jsx(_,{primary:t})]})}),e.jsxs(Ye,{anchorEl:u,open:d,onClose:()=>p(null),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[e.jsx(q,{selected:r==="",onClick:()=>{o(""),p(null)},children:"All"},"all"),l.map(f=>e.jsx(q,{selected:r===f,onClick:()=>{o(f),p(null)},children:f.charAt(0).toUpperCase()+f.slice(1)},f))]})]})},Qe=({onClose:t,setCurrentUser:s,setIsLoggedIn:r})=>{const[o,a]=y.useState(""),[u,p]=y.useState(""),[d,l]=y.useState(!1),[f,b]=y.useState(!1),[P,O]=y.useState(""),D=j(x=>x.fetchError),n=j(x=>x.setFetchError),h=j(x=>x.loading),c=j(x=>x.setLoading),w=()=>{a(""),p(""),O(""),l(!1),b(!1),n(""),t()},m=async x=>{var W,T;x.preventDefault(),c(!0),n("");try{const F=P.trim(),k=u.trim();let S;if(d?S=await ae.register({username:F,email:o.trim(),password:k}):S=await ae.login({username:F,email:F,password:k}),S.token||S.accessToken){const R=S.token||S.accessToken;localStorage.setItem("userToken",R),localStorage.setItem("userId",S.user.id),localStorage.setItem("username",((W=S.user)==null?void 0:W.username)||F);let z="user";try{const{jwtDecode:V}=await K(async()=>{const{jwtDecode:$}=await import("./vendor-JguMnKVy.js").then(L=>L.o);return{jwtDecode:$}},__vite__mapDeps([0,1,2,3]));z=V(R).role||"user"}catch{z="user"}localStorage.setItem("userRole",z),localStorage.setItem("admin",z==="admin"?"true":"false"),r(!0),s({username:((T=S.user)==null?void 0:T.username)||F}),w(),ne({title:"Welcome!",text:`Successfully ${d?"signed up":"logged in"}`,icon:"success",timer:2e3})}else n(S.error||S.message||(d?"Signup failed. Please check your input.":"Invalid credentials."))}catch(F){console.error("Network error:",F),ne({title:d?"Unable to sign up":"Unable to log in",text:"We couldn't reach the server. Please try again.",icon:"error"})}finally{c(!1)}};return e.jsxs(C,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(U,{variant:"h4",color:"text.primary",children:d?"Sign Up":"Login"}),e.jsx(I,{onClick:w,"aria-label":"Close login form",children:e.jsx(ce,{})})]}),e.jsxs("form",{onSubmit:m,style:{display:"flex",flexDirection:"column",gap:16},children:[d&&e.jsx(M,{label:"Email",type:"email",value:o,onChange:x=>a(x.target.value),required:!0,fullWidth:!0,autoComplete:"email",color:"primary"}),e.jsx(M,{label:d?"Username":"Username or Email",type:"text",value:P,onChange:x=>O(x.target.value),required:!0,fullWidth:!0,autoComplete:"username",color:"primary"}),e.jsxs(C,{sx:{position:"relative"},children:[e.jsx(M,{label:"Password",type:f?"text":"password",value:u,onChange:x=>p(x.target.value),required:!0,fullWidth:!0,autoComplete:"current-password",color:"primary"}),e.jsx(I,{"aria-label":"Toggle password visibility",onClick:()=>b(x=>!x),sx:{position:"absolute",right:8,top:8},size:"small",children:f?e.jsx(Pe,{}):e.jsx(Te,{})})]}),e.jsx(J,{type:"submit",disabled:h,variant:"contained",sx:{py:1.5,mt:1},color:"primary",children:h?e.jsx(Le,{size:24,color:"inherit"}):d?"Sign Up":"Login"})]}),D&&e.jsx(me,{severity:"error",sx:{mt:1},children:D}),e.jsxs(U,{align:"center",sx:{mt:2},color:"text.secondary",children:[d?"Already have an account?":"Don't have an account?"," ",e.jsx(J,{onClick:()=>l(!d),variant:"text",size:"small",children:d?"Login":"Sign Up"})]})]})},yt=["specialty","roaster","thirdwave"],bt=["outdoor_seating","wheelchair_accessible","lunch","pour_over","takeaway","vegan_options","breakfast","iced_drinks","pastries","multi_roaster","decaf","no_coffee_bar","limited_sitting","roaster_only"],$e=({onClose:t})=>{const[s,r]=y.useState({name:"",website:"",description:"",category:"",hasMultipleLocations:!1,features:[],images:[""],locations:[{address:"",neighborhood:"",locationNote:"",isMainLocation:!0}]}),[o,a]=y.useState(""),[u,p]=y.useState("success"),d=n=>{const{name:h,value:c,type:w,checked:m}=n.target;r(x=>({...x,[h]:w==="checkbox"?m:c}))},l=n=>{r(h=>({...h,features:h.features.includes(n)?h.features.filter(c=>c!==n):[...h.features,n]}))},f=(n,h)=>{const{name:c,value:w,type:m,checked:x}=n.target;r(W=>{const T=[...W.locations];return T[h][c]=m==="checkbox"?x:w,{...W,locations:T}})},b=async n=>{const h=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n)}`,w=await(await fetch(h)).json();return w&&w[0]?{lat:parseFloat(w[0].lat),lon:parseFloat(w[0].lon)}:null},P=()=>{r(n=>({...n,locations:[...n.locations,{address:"",neighborhood:"",locationNote:"",isMainLocation:!1}]}))},O=n=>{r(h=>({...h,locations:h.locations.filter((c,w)=>w!==n)}))},D=async n=>{n.preventDefault(),a("");try{const h=await Promise.all(s.locations.map(async m=>{const x=await b(m.address);return{...m,coordinates:x?{type:"Point",coordinates:[x.lon,x.lat]}:void 0}})),c={...s,locations:h};console.log(c);const w=await gt.submitCafe(c);w.success?(p("success"),a("Cafe added!"),r({name:"",website:"",description:"",category:"",hasMultipleLocations:!1,features:[],images:[""],locations:[{address:"",neighborhood:"",locationNote:"",isMainLocation:!0}]})):(p("error"),a(w.error||"We couldn't add this cafe. Please check and try again."))}catch{a(""),p("error"),ne({title:"We couldn't submit your suggestion",text:"We couldn't reach the server. Please try again.",icon:"error"})}};return e.jsxs(C,{component:"form",onSubmit:D,sx:n=>({p:2,maxWidth:640,color:n.palette.text.primary,backgroundColor:n.palette.background.paper}),children:[e.jsxs(re,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:1},children:[e.jsx(U,{variant:"h6",children:"Suggest a Cafe"}),e.jsx(I,{"aria-label":"Close add cafe form",onClick:t,size:"small",color:"inherit",children:e.jsx(ce,{})})]}),o&&e.jsx(C,{sx:{mb:2},children:e.jsx(ft,{message:o,type:u})}),e.jsxs(re,{spacing:2,sx:{mb:2},children:[e.jsx(M,{label:"Name",name:"name",value:s.name,onChange:d,required:!0,fullWidth:!0}),e.jsx(M,{label:"Website",name:"website",value:s.website,onChange:d,fullWidth:!0}),e.jsx(M,{label:"Description",name:"description",value:s.description,onChange:d,inputProps:{maxLength:1e3},fullWidth:!0,multiline:!0,minRows:2}),e.jsxs(Ze,{fullWidth:!0,required:!0,children:[e.jsx(et,{id:"category-label",children:"Category"}),e.jsxs(tt,{labelId:"category-label",name:"category",value:s.category,label:"Category",onChange:d,displayEmpty:!0,children:[e.jsx(q,{value:"",children:e.jsx("em",{children:"Select Category"})}),yt.map(n=>e.jsx(q,{value:n,children:n.charAt(0).toUpperCase()+n.slice(1)},n))]})]})]}),e.jsx(H,{sx:{my:2},children:e.jsx(U,{variant:"subtitle2",sx:{color:"inherit"},children:"Location"})}),e.jsxs(re,{spacing:2,children:[s.locations.map((n,h)=>e.jsxs(st,{variant:"outlined",sx:c=>({p:2,position:"relative",backgroundColor:c.palette.background.paper,borderColor:c.palette.divider,borderRadius:1}),children:[s.locations.length>1&&e.jsx(I,{"aria-label":"Remove this location",onClick:()=>O(h),size:"small",color:"inherit",sx:{position:"absolute",top:8,right:8},children:e.jsx(ce,{fontSize:"small"})}),e.jsxs(re,{spacing:2,children:[e.jsx(M,{label:"Address",name:"address",value:n.address,onChange:c=>f(c,h),required:!0,fullWidth:!0}),e.jsx(M,{label:"Neighborhood",name:"neighborhood",value:n.neighborhood,onChange:c=>f(c,h),fullWidth:!0}),e.jsx(M,{label:"Location Note",name:"locationNote",value:n.locationNote,onChange:c=>f(c,h),fullWidth:!0})]})]},h)),e.jsx(J,{type:"button",onClick:P,startIcon:e.jsx(rt,{}),variant:"text",sx:{alignSelf:"flex-start"},children:"Add Another Location"})]}),e.jsx(H,{sx:{my:2},children:e.jsx(U,{variant:"subtitle2",sx:{color:"inherit"},children:"Features"})}),e.jsx(ot,{row:!0,sx:{rowGap:1,columnGap:2},children:bt.map(n=>e.jsx(at,{control:e.jsx(nt,{size:"small",name:n,checked:s.features.includes(n),onChange:()=>l(n)}),label:n.replace(/_/g," "),sx:h=>({color:h.palette.text.primary})},n))}),e.jsx(J,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:3},children:"Add Cafe"})]})},Ct="/assets/whiteCup_logo-CpuKDxXz.svg",te=320,ve=t=>({width:te,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),overflowX:"hidden"}),Ie=t=>({transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),overflowX:"hidden",width:`calc(${t.spacing(7)} + 1px)`,[t.breakpoints.up("sm")]:{width:`calc(${t.spacing(8)} + 1px)`}}),wt=ge("div")(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1),...t.mixins.toolbar,color:t.palette.text.primary})),St=ge(Fe,{shouldForwardProp:t=>t!=="open"})(({theme:t,open:s})=>({zIndex:t.zIndex.drawer+1,background:t.palette.background.default,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),...s&&{marginLeft:te,width:`calc(100% - ${te}px)`,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})}})),kt=ge(de,{shouldForwardProp:t=>t!=="open"})(({theme:t,open:s})=>({width:te,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...s&&{...ve(t),"& .MuiDrawer-paper":ve(t)},...!s&&{...Ie(t),"& .MuiDrawer-paper":Ie(t)}})),vt=({searchResults:t=[],setSearchResults:s=()=>{},showLogin:r=!1,setShowLogin:o=()=>{},isLoggedIn:a=!1,setIsLoggedIn:u=()=>{},setCurrentUser:p=()=>{},showAddCafe:d=!1,setShowAddCafe:l=()=>{},onFilteredCafes:f=()=>{}})=>{const b=Ae(),[P,O]=y.useState(!1),D=j(g=>g.themeMode),n=j(g=>g.setThemeMode),h=D==="dark",c=b.palette.light.main,w=()=>{n(h?"light":"dark")},m=j?j(g=>g.cafes):[],x=t.length>0?t:m,W=Array.from(new Set(x.map(g=>g.category).filter(Boolean))),T=Array.from(new Set(x.map(g=>{var se,X;return(X=(se=g.locations)==null?void 0:se[0])==null?void 0:X.neighborhood}).filter(Boolean)));let F=!1;typeof window<"u"&&window.localStorage&&(F=localStorage.getItem("admin")==="true");const k=j(g=>g.cafeTypeFilter),S=j(g=>g.neighborhoodFilter),R=j(g=>g.setCafeTypeFilter),z=j(g=>g.setNeighborhoodFilter),V=j(g=>g.filteredCafes),Q=j(g=>g.clearFilters);y.useEffect(()=>{f(V)},[V,f]);const $=()=>{O(!0)},L=()=>{O(!1)};return e.jsxs(C,{sx:{display:{xs:"none",sm:"flex"}},children:[e.jsx(it,{}),e.jsx(St,{position:"fixed",open:P,color:"transparent",children:e.jsxs(Ee,{elevation:3,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:b.palette.background.paper,borderBottom:h?`1px solid ${b.palette.divider}`:`1px solid ${b.palette.divider}`,color:b.palette.light.main},children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row",flexGrow:1},children:[e.jsx(I,{"aria-label":"open drawer",onClick:$,edge:"start",sx:{marginRight:5,...P&&{display:"none"}},children:e.jsx(_e,{sx:{color:b.palette.accent.main}})}),e.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(N,{to:"/","aria-label":"map",style:{display:"inline-flex",lineHeight:0},children:e.jsx("img",{src:Ct,alt:"SCC Logo",style:{height:"2rem",width:"auto",display:"block"}})}),e.jsx(U,{component:"div",fontWeight:500,noWrap:!0,sx:g=>({color:g.palette.light.main,lineHeight:1,fontFamily:g.typography.header,fontSize:{xs:g.typography.h5.fontSize,sm:g.typography.h4.fontSize,md:g.typography.h2.fontSize},textTransform:"uppercase"}),"aria-hidden":"true",children:"Stockholms Coffee Club"})]})]}),e.jsxs(C,{sx:{display:"flex",alignItems:"center",float:"right"},children:[e.jsx(I,{sx:{ml:2},children:h?e.jsx(Me,{sx:{color:c}}):e.jsx(De,{sx:{color:b.palette.accent.main}})}),e.jsx(Oe,{checked:h,onChange:w,inputProps:{"aria-label":"toggle dark mode"}}),a&&e.jsx(I,{component:N,to:"/user",sx:{ml:2},"aria-label":"User Page",children:e.jsx(lt,{sx:{filter:"drop-shadow(1px 2px 4px rgba(0, 0, 0, 0.5))",fill:b.palette.accent.main}})})]})]})}),e.jsxs(kt,{variant:"permanent",open:P,children:[e.jsx(wt,{children:e.jsx(I,{onClick:L,children:b.direction==="rtl"?e.jsx(ct,{sx:{color:b.palette.accent.main}}):e.jsx(dt,{sx:{color:b.palette.accent.main}})})}),e.jsx(H,{}),e.jsxs(oe,{children:[e.jsx(v,{disablePadding:!0,sx:{display:"block"},children:e.jsxs(A,{component:N,to:"/",children:[e.jsx(E,{children:e.jsx(We,{sx:{color:c}})}),e.jsx(_,{primary:"Map"})]})}),e.jsx(v,{disablePadding:!0,sx:{display:"block"},children:e.jsxs(A,{component:N,to:"/tastings",children:[e.jsx(E,{children:e.jsx(ue,{sx:{color:c}})}),e.jsx(_,{primary:"Tastings"})]})}),a&&e.jsx(v,{disablePadding:!0,sx:{display:"block"},children:e.jsxs(A,{onClick:()=>l(!0),children:[e.jsx(E,{children:e.jsx(ze,{sx:{color:c}})}),e.jsx(_,{primary:"Add Cafe"})]})}),a&&F&&e.jsx(v,{disablePadding:!0,sx:{display:"block"},children:e.jsxs(A,{component:N,to:"/admin",children:[e.jsx(E,{children:e.jsx(Re,{sx:{color:c}})}),e.jsx(_,{primary:"Admin"})]})}),a&&!F&&e.jsx(v,{disablePadding:!0,sx:{display:"block"},children:e.jsxs(A,{component:N,to:"/user",children:[e.jsx(E,{children:e.jsx(Ne,{sx:{color:c}})}),e.jsx(_,{primary:"Userpage"})]})})]}),e.jsx(H,{}),e.jsxs(oe,{children:[!a&&e.jsx(v,{disablePadding:!0,sx:{display:"block"},children:e.jsxs(A,{onClick:()=>o(!0),children:[e.jsx(E,{children:e.jsx(he,{sx:{color:c}})}),e.jsx(_,{primary:"Login"})]})}),a&&e.jsx(v,{disablePadding:!0,sx:{display:"block"},children:e.jsxs(A,{onClick:()=>{localStorage.removeItem("userToken"),localStorage.removeItem("username"),localStorage.removeItem("admin"),u(!1),o(!1)},children:[e.jsx(E,{children:e.jsx(xe,{sx:{color:c}})}),e.jsx(_,{primary:"Logout"})]})})]}),e.jsx(Z,{open:r,onClose:()=>o(!1),maxWidth:"xs",fullWidth:!0,children:e.jsx(ee,{sx:{p:0},children:e.jsx(Qe,{onClose:()=>o(!1),setCurrentUser:p,setIsLoggedIn:u})})}),e.jsx(Z,{open:d,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-container":{alignItems:"flex-start",justifyContent:"flex-start"}},PaperProps:{sx:{position:"absolute",top:88,left:P?te+24:88}},children:e.jsx(ee,{sx:{p:0},children:e.jsx($e,{onClose:()=>l(!1)})})}),e.jsx(H,{}),e.jsx(ke,{label:"Filter by Cafe Type",options:W,value:k,onChange:R,iconComponent:e.jsx(Be,{sx:{color:c}})}),e.jsx(ke,{label:"Filter by neighborhood",options:T,value:S,onChange:z,iconComponent:e.jsx(Ue,{sx:{color:c}})}),(k||S)&&e.jsxs(e.Fragment,{children:[e.jsx(H,{sx:{my:1}}),e.jsx(v,{disablePadding:!0,sx:{display:"block",py:0},children:e.jsxs(A,{onClick:Q,sx:{width:"100%",justifyContent:"flex-start",minHeight:48,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},children:[e.jsx(E,{children:e.jsx(ut,{sx:{color:c}})}),e.jsx(_,{primary:"Clear All Filters"})]})})]})]})]})},It={"@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}},Pt="#222",Tt=(t,s)=>{var r,o;return e.jsxs(C,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",children:[e.jsxs(C,{sx:{position:"relative",width:300,height:300,display:"flex",alignItems:"center",justifyContent:"center",...It},children:[e.jsx(C,{component:"img",src:"/src/assets/images/scc_logo_text.svg",alt:"Logo Text",sx:{position:"absolute",top:-10,left:0,width:300,height:300,animation:"spin 4.5s linear infinite",filter:s==="dark"?"brightness(0.8)":void 0,color:s==="dark"?(o=(r=t==null?void 0:t.palette)==null?void 0:r.common)==null?void 0:o.light:Pt,"&:hover":{animationPlayState:"paused"}}}),e.jsx(C,{component:"img",src:"/src/assets/images/scc_shield.svg",alt:"Logo Shield",sx:{position:"absolute",width:150,height:150}})]}),e.jsx(U,{color:"text.primary",variant:"h2",mt:2,children:"Currently Brewing..."})]})},le=56,Lt=()=>{var pe,fe,je,ye;const t=Ae(),s=qe();He();const r=j(i=>i.isLoggedIn),o=j(i=>i.setIsLoggedIn),a=j(i=>i.cafes),u=j(i=>i.themeMode),p=j(i=>i.setThemeMode),d=u==="dark",l=((pe=t.palette.light)==null?void 0:pe.main)||"#fff",f=j(i=>i.cafeTypeFilter),b=j(i=>i.neighborhoodFilter),P=j(i=>i.setCafeTypeFilter),O=j(i=>i.setNeighborhoodFilter),D=j(i=>i.clearFilters),n=Array.from(new Set(a.map(i=>i.category).filter(Boolean))),h=Array.from(new Set(a.map(i=>{var be,Ce;return(Ce=(be=i.locations)==null?void 0:be[0])==null?void 0:Ce.neighborhood}).filter(Boolean)));let c=!1;typeof window<"u"&&window.localStorage&&(c=localStorage.getItem("admin")==="true");const[w,m]=B.useState(!1),[x,W]=B.useState(!1),[T,F]=B.useState(""),[k,S]=B.useState(!1),[R,z]=B.useState(!1),[V,Q]=B.useState(!1),$=i=>{i==="main"?(Q(!1),m(!0)):i==="filter"&&(m(!1),Q(!0)),window.dispatchEvent(new CustomEvent("drawerStateChange",{detail:{isOpen:!0}}))},L=()=>{m(!1),Q(!1),window.dispatchEvent(new CustomEvent("drawerStateChange",{detail:{isOpen:!1}}))},g=i=>{s(i),L()},se=()=>{p(d?"light":"dark")},X={sx:{width:"100%",maxHeight:"calc(50vh)",height:"auto",overflowY:"auto",borderTopLeftRadius:16,borderTopRightRadius:16,bottom:le,position:"fixed",backgroundColor:t.palette.primary.main,color:((fe=t.palette.light)==null?void 0:fe.main)||"#fff",boxShadow:"0px -4px 8px rgba(0,0,0,0.1)"}};return e.jsxs(B.Fragment,{children:[e.jsx(Fe,{position:"fixed",sx:{top:"auto",bottom:0,width:"100vw",height:le,display:{xs:"flex",sm:"none"},zIndex:1200,borderRadius:0},children:e.jsxs(Ee,{sx:{minHeight:le,px:1,justifyContent:"space-between",alignItems:"center",overflowX:"auto",gap:.5},children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(I,{color:"inherit",size:"large",sx:{p:1},onClick:()=>$("main"),children:e.jsx(_e,{fontSize:"medium",sx:{color:l}})}),e.jsx(I,{color:"inherit",size:"large",sx:{p:1},onClick:()=>g("/tastings"),children:e.jsx(ue,{fontSize:"medium",sx:{color:l}})})]}),e.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(I,{color:"inherit",size:"large",sx:{p:1},onClick:()=>W(!0),children:e.jsx(ht,{fontSize:"medium",sx:{color:l}})}),e.jsx(I,{color:"inherit",size:"large",sx:{p:1},onClick:()=>$("filter"),children:e.jsx(xt,{fontSize:"medium",sx:{color:l}})}),r?e.jsx(I,{color:"inherit",size:"large",sx:{p:1},onClick:()=>{localStorage.removeItem("userToken"),localStorage.removeItem("username"),localStorage.removeItem("admin"),o(!1),g("/")},children:e.jsx(xe,{fontSize:"medium",sx:{color:l}})}):e.jsx(I,{color:"inherit",size:"large",sx:{p:1},onClick:()=>s("/login"),children:e.jsx(he,{fontSize:"medium",sx:{color:l}})})]})]})}),e.jsx(de,{anchor:"bottom",open:w,onClose:L,hideBackdrop:!1,PaperProps:X,sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.5)"},zIndex:1199},children:e.jsxs(oe,{sx:{pt:0},children:[e.jsxs(v,{disablePadding:!0,sx:{backgroundColor:t.palette.primary.dark,display:"flex",justifyContent:"space-between",pl:2,pr:1,py:.5},children:[e.jsx(C,{component:"span",sx:{fontWeight:500,fontSize:"1.2rem",color:l},children:"Menu"}),e.jsx(I,{onClick:L,children:e.jsx(we,{sx:{color:l}})})]}),e.jsx(v,{disablePadding:!0,children:e.jsxs(A,{component:N,to:"/",onClick:L,children:[e.jsx(E,{children:e.jsx(We,{sx:{color:l}})}),e.jsx(_,{primary:"Map"})]})}),e.jsx(v,{disablePadding:!0,children:e.jsxs(A,{component:N,to:"/tastings",onClick:L,children:[e.jsx(E,{children:e.jsx(ue,{sx:{color:l}})}),e.jsx(_,{primary:"Tastings"})]})}),r&&e.jsx(v,{disablePadding:!0,children:e.jsxs(A,{onClick:()=>{z(!0),L()},children:[e.jsx(E,{children:e.jsx(ze,{sx:{color:l}})}),e.jsx(_,{primary:"Add Cafe"})]})}),r&&c&&e.jsx(v,{disablePadding:!0,children:e.jsxs(A,{component:N,to:"/admin",onClick:L,children:[e.jsx(E,{children:e.jsx(Re,{sx:{color:l}})}),e.jsx(_,{primary:"Admin"})]})}),r&&!c&&e.jsx(v,{disablePadding:!0,children:e.jsxs(A,{component:N,to:"/user",onClick:L,children:[e.jsx(E,{children:e.jsx(Ne,{sx:{color:l}})}),e.jsx(_,{primary:"Userpage"})]})}),e.jsx(H,{sx:{my:1,borderColor:"rgba(255,255,255,0.1)"}}),r?e.jsx(v,{disablePadding:!0,children:e.jsxs(A,{onClick:()=>{localStorage.removeItem("userToken"),localStorage.removeItem("username"),localStorage.removeItem("admin"),o(!1),L(),s("/")},children:[e.jsx(E,{children:e.jsx(xe,{sx:{color:l}})}),e.jsx(_,{primary:"Logout"})]})}):e.jsx(v,{disablePadding:!0,children:e.jsxs(A,{onClick:()=>{S(!0),L()},children:[e.jsx(E,{children:e.jsx(he,{sx:{color:l}})}),e.jsx(_,{primary:"Login"})]})}),e.jsx(H,{sx:{my:1,borderColor:"rgba(255,255,255,0.1)"}}),e.jsx(v,{children:e.jsxs(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[e.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[d?e.jsx(Me,{sx:{color:l}}):e.jsx(De,{sx:{color:l}}),e.jsx(C,{component:"span",sx:{color:l},children:"Theme"})]}),e.jsx(Oe,{checked:d,onChange:se,inputProps:{"aria-label":"toggle dark mode"},sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:(je=t.palette.light)==null?void 0:je.main},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:(ye=t.palette.accent)==null?void 0:ye.main}}})]})})]})}),e.jsxs(de,{anchor:"bottom",open:V,onClose:L,hideBackdrop:!1,PaperProps:X,sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.5)"},zIndex:1199},children:[e.jsx(oe,{sx:{pt:0},children:e.jsxs(v,{disablePadding:!0,sx:{backgroundColor:t.palette.primary.dark,display:"flex",justifyContent:"space-between",pl:2,pr:1,py:.5},children:[e.jsx(C,{component:"span",sx:{fontWeight:500,fontSize:"1.2rem",color:l},children:"Filter Cafes"}),e.jsx(I,{onClick:L,children:e.jsx(we,{sx:{color:l}})})]})}),e.jsxs(C,{sx:{px:2,py:2},children:[e.jsxs(M,{select:!0,fullWidth:!0,label:"Filter by Cafe Type",value:f,onChange:i=>{P(i.target.value)},sx:{mb:2,"& .MuiOutlinedInput-root":{color:"inherit"},"& .MuiInputLabel-root":{color:"inherit"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.5)"}},InputProps:{startAdornment:e.jsx(Be,{sx:{color:l,mr:1}})},children:[e.jsx(q,{value:"",children:"All Types"}),n.map(i=>e.jsx(q,{value:i,children:i.charAt(0).toUpperCase()+i.slice(1)},i))]}),e.jsxs(M,{select:!0,fullWidth:!0,label:"Filter by Neighborhood",value:b,onChange:i=>{O(i.target.value)},sx:{mb:2,"& .MuiOutlinedInput-root":{color:"inherit"},"& .MuiInputLabel-root":{color:"inherit"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.5)"}},InputProps:{startAdornment:e.jsx(Ue,{sx:{color:l,mr:1}})},children:[e.jsx(q,{value:"",children:"All Neighborhoods"}),h.map(i=>e.jsx(q,{value:i,children:i.charAt(0).toUpperCase()+i.slice(1)},i))]}),(f||b)&&e.jsx(C,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(I,{onClick:()=>{D(),L()},sx:{color:l,border:`1px solid ${l}`,borderRadius:1,px:2,fontSize:"0.875rem"},children:"Clear Filters"})})]})]}),e.jsx(Z,{open:k,onClose:()=>S(!1),maxWidth:"xs",fullWidth:!0,children:e.jsx(ee,{sx:{p:0},children:e.jsx(Qe,{onClose:()=>S(!1),setIsLoggedIn:o})})}),e.jsx(Z,{open:R,onClose:()=>z(!1),maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-container":{alignItems:"flex-start",justifyContent:"flex-start"}},PaperProps:{sx:{position:"absolute",top:88,left:24,width:{xs:"calc(100% - 48px)",sm:600}}},children:e.jsx(ee,{sx:{p:0},children:e.jsx($e,{onClose:()=>z(!1)})})}),e.jsx(Z,{open:x,onClose:()=>W(!1),maxWidth:"xs",fullWidth:!0,children:e.jsx(ee,{children:e.jsx(M,{autoFocus:!0,margin:"dense",label:"Search Cafes",type:"text",fullWidth:!0,variant:"outlined",value:T,onChange:i=>F(i.target.value)})})})]})},Ft=y.lazy(()=>K(()=>import("./MapPage-CWfx1ZXb.js"),__vite__mapDeps([4,0,1,2,3,5,6]))),At=y.lazy(()=>K(()=>import("./TastingsPage-7COQdGuy.js"),__vite__mapDeps([7,1,0,2,3,8,5,6]))),Et=y.lazy(()=>K(()=>import("./CafePage-C2js8DJa.js"),__vite__mapDeps([9,1,0,2,3,5,6]))),_t=y.lazy(()=>K(()=>import("./UserPage-BEceHaKf.js"),__vite__mapDeps([10,1,0,2,3,8,5,6]))),Mt=y.lazy(()=>K(()=>import("./AdminPage-DyhHBhnI.js"),__vite__mapDeps([11,1,0,2,3,5]))),Dt=()=>{const[t,s]=y.useState(!1),[r,o]=y.useState(null),[a,u]=y.useState(!1),[p,d]=y.useState(!1),[l,f]=y.useState([]),[b,P]=y.useState("");return y.useEffect(()=>{const O=localStorage.getItem("userToken"),D=localStorage.getItem("username");O&&D&&(s(!0),o({username:D}))},[]),e.jsxs(Ge,{children:[e.jsx("header",{children:e.jsx(vt,{searchResults:l,setSearchResults:f,searchQuery:b,setSearchQuery:P,showLogin:a,setShowLogin:u,isLoggedIn:t,setIsLoggedIn:s,setCurrentUser:o,showAddCafe:p,setShowAddCafe:d,style:{flex:1}})}),e.jsx("main",{style:{flex:1},children:e.jsx(y.Suspense,{fallback:e.jsx(Tt,{}),children:e.jsxs(Ve,{children:[e.jsx(Y,{path:"/",element:e.jsx(Ft,{})}),e.jsx(Y,{path:"/tastings",element:e.jsx(At,{searchResults:l,setSearchResults:f,searchQuery:b,setSearchQuery:P})}),e.jsx(Y,{path:"/cafes/:cafeId",element:e.jsx(Et,{})}),e.jsx(Y,{path:"/user",element:e.jsx(_t,{isLoggedIn:t})}),e.jsx(Y,{path:"/admin",element:e.jsx(Mt,{isLoggedIn:t,currentUser:r})})]})})}),e.jsx(Lt,{}),e.jsxs("footer",{hidden:!0,children:[e.jsx("p",{children:"© 2025 Stockholm Coffee Club by Jonny Hicks"}),e.jsx("div",{children:e.jsxs("ul",{className:"footer-right",children:[e.jsx("li",{children:e.jsx("a",{href:"https://github.com/KidFromCalifornia",target:"_blank",rel:"noopener noreferrer",className:"Github","aria-label":"Link to Github",children:"Github"})}),e.jsx("li",{children:e.jsx("a",{href:"https://www.linkedin.com/in/jonathanwhicks/",target:"_blank",rel:"noopener noreferrer",className:"linkedin","aria-label":"Link to LinkedIn",children:"LinkedIn"})}),e.jsx("li",{children:e.jsx("a",{href:"https://www.instagram.com/thekidfromcalifornia",target:"_blank",rel:"noopener noreferrer",className:"instagram","aria-label":"Link to Instagram",children:"Instagram"})})]})})]})]})},Ot=()=>{new Promise((s,r)=>{if(window.WebFont){s();return}const o=document.createElement("script");o.src=(document.location.protocol==="https:"?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js",o.type="text/javascript",o.async=!0,o.onload=s,o.onerror=r;const a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)}).then(()=>{window.WebFont&&window.WebFont.load({custom:{families:["Stockholm Type:n4,n7"],urls:["//font.stockholm.se/css/stockholm-type.css"]},timeout:3e3,loading:()=>{document.documentElement.classList.add("wf-stockholmtype-loading")},active:()=>{document.documentElement.classList.remove("wf-stockholmtype-loading"),document.documentElement.classList.add("wf-stockholmtype-active")},inactive:()=>{document.documentElement.classList.remove("wf-stockholmtype-loading"),document.documentElement.classList.add("wf-stockholmtype-inactive")}})}).catch(()=>{const s=document.createElement("link");s.rel="stylesheet",s.href="//font.stockholm.se/css/stockholm-type.css",document.head.appendChild(s),document.documentElement.classList.add("wf-stockholmtype-inactive")})};Ot();const Wt=document.getElementById("root"),zt=Ke.createRoot(Wt);zt.render(e.jsx(B.StrictMode,{children:e.jsx(jt,{children:e.jsx(Dt,{})})}));export{ft as S,G as a,gt as c,ne as s,Se as t,j as u};
